# Stage 4/6: White Squares and Spray Usage
## Description
Now, let's check the squares painted in white. Find out how many spray cans were used for each of the  
squares painted in white. Explore the simplicity of white and the different spray can usage for each painted square.

## Objectives
- Identify the square_id of those painted in white and determine the num_sprays cans used to paint them  
    from the Painting table in the coloring database.
- Use a query that selects the Square ID from the Painting table, calculates the COUNT of distinct spray ids,  
  and filters the results for squares painted in white where the SUM of paint volume is 765 and  
  at least 3 different spray cans with different colors were used.
- Ensure results are sorted by square ids.
- Use the GROUP BY and HAVING functions to achieve the task.
- The column order is essential.


Take a look at the following database structure:

![Explanation of the database](./IMG1.png)

## Explanation of the database:
The Coloring Database encompasses three main tables: painting, spray, square.

In-depth details of each table are as follows:

The `**Square**`** table represents individual squares that can be painted using spray cans. It contains the following columns:
  - `id`: A unique identifier for each square.
  - `name`: The name or label associated with the square.

The `**Spray**`** table contains information about different spray paint cans. It includes the following columns:
  - `id`: A unique identifier for each spray can. 
  - `name`: The name or label associated with the spray can.
  - `color`: The color of the spray can, is represented only by a single character ('R' for red, 'G' for green, 'B' for blue).

The `**Painting**`** table is used to track the painting activity on squares using spray cans. It includes the following columns:
  - `datetime`: The timestamp indicating when the painting occurred with an accuracy of a second, not milliseconds.
  - `square_id`: A reference to the square being painted, linking to the id column in the Square table.
  - `spray_id`: A reference to the spray can be used for painting, linking to the id column in the Spray table.
  - `volume`: The amount of paint applied during the painting process.

## Additional information and rules to consider:
- The volume of the spray can is `initially set to 255`, and it decreases as the can is used for painting.
- The color of the square is determined by the RGB rule, with (R=0, G=0, B=0) representing `black` and  
  (R=255, G=255, B=255) representing `white`.
- The entry in the Painting table `reduces` the amount of paint in the spray can by the specified volume column  
  and `increases` the amount of paint in the square by the same amount.
- The volume value should be in the range of` 0 < volume <= 255`.
- The amount of paint in a square of the `same color cannot exceed 255`, and  
  the amount of paint in a `spray can not be less than zero`.

** Table names are case-sensitive

Click on the [link](Database.sql) to download the SQL query for creating the database.

## Example

_Painting Table Example:_

| datetime            | square_id | spray_id | volume |
|---------------------|-----------|----------|--------|
| 2020-01-01 01:13:36 | 1         | 1        | 255    |
| 2020-01-01 02:13:36 | 1         | 2        | 255    |
| 2020-01-01 03:13:36 | 1         | 3        | 105    |
| 2020-01-01 04:13:36 | 1         | 4        | 150    |
| 2020-01-01 05:13:36 | 3         | 5        | 255    |
| 2020-01-01 06:13:36 | 3         | 6        | 100    |
| 2020-01-01 07:13:36 | 3         | 7        | 155    |
| 2020-01-01 08:13:36 | 3         | 8        | 145    |
| 2020-01-01 09:13:36 | 3         | 9        | 110    |
| 2020-01-01 10:13:36 | 4         | 9        | 155    |

From the data in the table, we can see that squares with IDs `1` and `3` are painted white. They were painted by `4` and `5`  
different spray cans, totaling `765` in volume. Since the paint in a square of the `same color can't exceed 255`,  
we can be certain they were painted by different colored spray cans, even without knowing the specific colors.  
The output of the table after displaying white squares identified along with the respective count of  
spray cans used for painting, sorted by square ids:

| square_id | num_sprays |
|-----------|------------|
| 1         | 4          |
| 3         | 5          |


_From the output above, it can be seen that the order of the columns is `square_id`-> `num_sprays`_

## Query template:
```markdown
SELECT square_id, COUNT(DISTINCT spray_id) AS num_sprays ...;
```