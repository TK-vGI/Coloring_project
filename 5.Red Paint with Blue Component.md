# Stage 5/6: Red Paint with Blue Component
## Description
Now, let's find red spray cans used more than once and pick those that painted squares with a touch of blue.  
Explore the mix of red and blue, simplifying the search for vibrant color combinations on your canvas.

## Objectives
- Identify the `name` of red (**'R'**) spray cans from the `Spray` table that have been used more than once and  
  have painted squares with a blue component in the coloring database.
- Utilize a query that joins the `Spray` and `Painting` tables, filtering for red spray cans (**'R'**) and checking  
  for the existence of blue spray cans (**'B'**) painting the same squares.  
- Ensure results are sorted by spray names.  
- Use the `DISTINCT` keyword to fetch unique names and employ **subqueries** for precise filtering of spray cans.

Take a look at the following database structure:

![Explanation of the database](./IMG1.png)

## Explanation of the database:
The Coloring Database encompasses three main tables: painting, spray, square.

In-depth details of each table are as follows:

The `**Square**`** table represents individual squares that can be painted using spray cans. It contains the following columns:
  - `id`: A unique identifier for each square.
  - `name`: The name or label associated with the square.

The `**Spray**`** table contains information about different spray paint cans. It includes the following columns:
  - `id`: A unique identifier for each spray can. 
  - `name`: The name or label associated with the spray can.
  - `color`: The color of the spray can, is represented only by a single character ('R' for red, 'G' for green, 'B' for blue).

The `**Painting**`** table is used to track the painting activity on squares using spray cans. It includes the following columns:
  - `datetime`: The timestamp indicating when the painting occurred with an accuracy of a second, not milliseconds.
  - `square_id`: A reference to the square being painted, linking to the id column in the Square table.
  - `spray_id`: A reference to the spray can be used for painting, linking to the id column in the Spray table.
  - `volume`: The amount of paint applied during the painting process.

## Additional information and rules to consider:
- The volume of the spray can is `initially set to 255`, and it decreases as the can is used for painting.
- The color of the square is determined by the RGB rule, with (R=0, G=0, B=0) representing `black` and  
  (R=255, G=255, B=255) representing `white`.
- The entry in the Painting table `reduces` the amount of paint in the spray can by the specified volume column  
  and `increases` the amount of paint in the square by the same amount.
- The volume value should be in the range of` 0 < volume <= 255`.
- The amount of paint in a square of the `same color cannot exceed 255`, and  
  the amount of paint in a `spray can not be less than zero`.

** Table names are case-sensitive

Click on the [link](Database.sql) to download the SQL query for creating the database.

## Example

_Spray Table Example:_

| id | name    | color |
|----|---------|-------|
| 1  | Baloon1 | R     |
| 2  | Baloon2 | B     |
| 3  | Baloon3 | G     |
| 4  | Baloon4 | R     |
| 5  | Baloon5 | G     |

_Painting Table Example:_

| datetime            | square_id | spray_id | volume |
|---------------------|-----------|----------|--------|
| 2020-01-01 01:13:36 | 1         | 1        | 155    |
| 2020-01-01 02:13:36 | 1         | 2        | 200    |
| 2020-01-01 03:13:36 | 1         | 1        | 100    |
| 2020-01-01 04:13:36 | 1         | 3        | 100    |
| 2020-01-01 05:13:36 | 2         | 4        | 50     |
| 2020-01-01 06:13:36 | 2         | 4        | 100    |
| 2020-01-01 07:13:36 | 2         | 5        | 50     |

From the data in the table above, it is evident that `Balloon1`, with a red color, painted square `1` twice, which  
was also painted by `Balloon2` with a blue color. `Balloon4` also painted the square twice, but that square was not  
painted with a blue spray. The resulting table displays red spray cans used more than once, specifically those  
that painted squares with a blue component, sorted by spray name:

| name    |
|---------|
| Ballon1 |


## Query template:
```markdown
SELECT DISTINCT s.name ...;
```