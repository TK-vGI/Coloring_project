# Stage2/6: Paint Usage by Color
## Description
After checking out the squares without paint, you're now curious about the colors used. Your next step is to find out how much paint was used for each color, exploring the variety of colors that have touched your canvas.

## Objectives
- Identify the color from the `Spray` table and `SUM` of `total_paint_used` from the `Painting` table in the **coloring database**. 
- To achieve this, use a query that selects the color from the Spray table and calculates the sum of paint volume  
  from the Painting table for each color.  
- Ensure that results are **ordered by** the `total_paint_used`.  
- Use the `GROUP BY` and `JOIN` functions to solve the question.  
- The column order is essential.  

Take a look at the following database structure:

![Explanation of the database](./IMG1.png)

## Explanation of the database:
The Coloring Database encompasses three main tables: painting, spray, square.

In-depth details of each table are as follows:

The `**Square**`** table represents individual squares that can be painted using spray cans. It contains the following columns:
  - `id`: A unique identifier for each square.
  - `name`: The name or label associated with the square.

The `**Spray**`** table contains information about different spray paint cans. It includes the following columns:
  - `id`: A unique identifier for each spray can. 
  - `name`: The name or label associated with the spray can.
  - `color`: The color of the spray can, is represented only by a single character ('R' for red, 'G' for green, 'B' for blue).

The `**Painting**`** table is used to track the painting activity on squares using spray cans. It includes the following columns:
  - `datetime`: The timestamp indicating when the painting occurred with an accuracy of a second, not milliseconds.
  - `square_id`: A reference to the square being painted, linking to the id column in the Square table.
  - `spray_id`: A reference to the spray can be used for painting, linking to the id column in the Spray table.
  - `volume`: The amount of paint applied during the painting process.

## Additional information and rules to consider:
- The volume of the spray can is `initially set to 255`, and it decreases as the can is used for painting.
- The color of the square is determined by the RGB rule, with (R=0, G=0, B=0) representing `black` and  
  (R=255, G=255, B=255) representing `white`.
- The entry in the Painting table `reduces` the amount of paint in the spray can by the specified volume column  
  and `increases` the amount of paint in the square by the same amount.
- The volume value should be in the range of` 0 < volume <= 255`.
- The amount of paint in a square of the `same color cannot exceed 255`, and  
  the amount of paint in a `spray can not be less than zero`.

** Table names are case-sensitive

Click on the [link](Database.sql) to download the SQL query for creating the database.

## Example

_Spray Table Example:_

| id | name    | color |
|----|---------|-------|
| 1  | Baloon1 | R     |
| 2  | Baloon2 | B     |
| 3  | Baloon3 | G     |
| 4  | Baloon4 | R     |

_Painting Table Example:_

| datetime            | square_id | spray_id | volume |
|---------------------|-----------|----------|--------|
| 2020-01-01 01:13:36 | 1         | 1        | 255    |
| 2020-01-01 02:13:36 | 1         | 2        | 205    |
| 2020-01-01 03:13:36 | 1         | 3        | 100    |
| 2020-01-01 04:13:36 | 1         | 3        | 100    |
| 2020-01-01 05:13:36 | 2         | 4        | 50     |

From the data presented in the table above, it is evident that `spray` cans with ids `1` and `4 `are both red, and  
from the `Painting` it is clear that in sum both of them painted squares with a total amount of volume equal to `305`.  
Similarly, the total amount for other colors is calculated. The output table, after identifying the amount of  
`Spray` used for each color, with the ordering of `total_paint_used` in **ascending** order:

| color | total_paint_used |
|-------|------------------|
| R     | 305              |
| G     | 205              |
| B     | 200              |


_From the output above, it can be seen that the order of the columns is `color`-> `total_paint_used`_

## Query template:
```markdown
SELECT s.color, SUM(p.volume) AS total_paint_used ...
```